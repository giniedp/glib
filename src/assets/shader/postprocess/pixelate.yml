program:
  #include <postprocess.h>

  uniform float vOffset;
  uniform float pixelWidth;
  uniform float pixelHeight;

technique:
  pass:
    name: 'pixelate'
    vertexShader:
      void main(void) {
        texCoord = texture;
        gl_Position = vec4(position, 1.0);
      }

    pixelShader:
      void main() {

        vec2 uv = texCoord;

        if (uv.x <= vOffset) {
          float dx = pixelWidth / targetWidth;
          float dy = pixelHeight / targetHeight;
          uv = vec2(dx * floor(uv.x / dx), dy * floor(uv.y / dy));
        }
        gl_FragColor = texture2D(textureSampler, uv).rgb;

      }
